---
# -------------------------------------------------------
# STEP 1: SET VARIABLES
# -------------------------------------------------------
- name: "Ensure Error List Exists (Fallback)"
  set_fact:
    health_check_errors: "{{ health_check_errors | default([]) }}"

# -------------------------------------------------------
# STEP 2: EXECUTE CHECKS (Modularized)
# -------------------------------------------------------
- name: "Wrapper: Execute Health Checks"
  block:
    - include_tasks: checks/01_variables.yml
    - include_tasks: checks/02_services.yml
    - include_tasks: checks/03_config_files.yml
    - include_tasks: checks/04_node_health.yml
    - include_tasks: checks/05_properties.yml

# -------------------------------------------------------
# STEP 3. GENERATE REPORT
# -------------------------------------------------------
- name: "Generate Consolidated Report"
  include_tasks: reporting.yml